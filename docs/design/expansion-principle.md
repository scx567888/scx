# 拓展原则

在整个 Scx 框架中，我们遵循以下扩展处理原则：

| 类型             | 处理方式     | 原因             |
|:---------------|:---------|:---------------|
| 可选扩展（如数据库方言）   | SPI 自动发现 | 不影响主逻辑，动态适配    |
| 必要控制（如协议升级处理器） | 显式配置     | 直接决定系统行为，需明确指定 |

举例
在 scx-http-x 中，针对 HTTP 协议升级 采用显式配置：

原因如下

- **WebSocket 升级属于系统行为决策点**：  
  配置或不配置，直接影响 HTTP 服务器处理请求的方式。
- 升级通常需要**明确的参数设置**（如 websocket 最大可处理帧大小, 是否合并帧等）。
- 因此，scx-http 要求通过**显式配置 UpgradeHandler**，而不是使用 SPI 自动发现。

在 scx-jdbc 中，我们对扩展机制采用 spi：

原因如下

数据库方言属于扩展能力，如 MySQL、SQLite、PostgreSQL 等。
有新的方言扩展时，框架能够自动支持；缺少某种方言时，不会影响整体逻辑。
因此，scx-jdbc 采用 SPI（Service Provider Interface） 动态加载机制，自动发现可用方言实现。
用户只需添加相应依赖，无需显式配置。
这种设计带来了：

扩展能力随依赖变化自动适配
主框架与具体实现完全解耦
使用体验简洁一致，无需手动注册或配置
