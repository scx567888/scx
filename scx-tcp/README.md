# SCX TCP è®¾è®¡æ€è·¯

## 1. ç»Ÿä¸€æ€§ï¼šè¿ç»­æ€§çš„å­˜åœ¨

### ğŸŒŸ ä¸€åˆ‡é€šä¿¡çš†æºäºã€Œè¿ç»­æ€§çš„å­˜åœ¨ã€

ä»æœ€åŸºç¡€çš„å“²å­¦è§†è§’å‡ºå‘ï¼Œé€šä¿¡ä¸–ç•Œä¸­çš„æ‰€æœ‰äº¤äº’ï¼Œéƒ½å¯è¢«ç†è§£ä¸ºæŸç§â€œå¯é‡å¤å‘ç”Ÿçš„è¿ç»­å­˜åœ¨â€ã€‚  
æ— è®ºæ˜¯ TCP è¿æ¥ä¸æ•°æ®ä¼ è¾“ï¼ŒHTTP è¯·æ±‚ä¸å“åº”ï¼Œè¿˜æ˜¯ WebSocket æ¶ˆæ¯ï¼Œå®ƒä»¬æœ¬è´¨ä¸Šéƒ½å±äºä¸€ç§æŒç»­æ€§çš„ä¿¡æ¯äº¤äº’è¿‡ç¨‹ã€‚  
è¿™ä¸€è¿‡ç¨‹æ˜¯åŠ¨æ€çš„ã€è¿ç»­çš„ï¼Œå¯ä»¥ä»å¤šä¸ªæŠ½è±¡å±‚æ¬¡è¿›è¡Œåˆ†æä¸å»ºæ¨¡ã€‚

---

## 2. æŠ½è±¡è§†è§’ï¼šäº‹ä»¶ä¸æµ

SCX æ¡†æ¶é€šè¿‡ä¸¤ä¸ªæ ¸å¿ƒè§†è§’æ¥åˆ»ç”»é€šä¿¡çš„è¿ç»­æ€§ï¼š**äº‹ä»¶ï¼ˆEventï¼‰** ä¸ **æµï¼ˆStreamï¼‰**ã€‚

### âœ´ï¸ äº‹ä»¶ vs æµ

| ç±»å‹            | å®šä¹‰         | ç‰¹å¾        | ç¤ºä¾‹                            |
|---------------|------------|-----------|-------------------------------|
| **äº‹ä»¶ï¼ˆEventï¼‰** | ç¬æ—¶å‘ç”Ÿçš„ç¦»æ•£åŠ¨ä½œ  | ä¸å¯é¢„æµ‹ã€ä¸å¯æŒç»­ | TCP è¿æ¥å»ºç«‹ã€HTTP è¯·æ±‚åˆ°è¾¾            |
| **æµï¼ˆStreamï¼‰** | å¯æŒç»­æ¶ˆè´¹çš„æ•°æ®åºåˆ— | æœ‰èµ·ç‚¹ã€å¯æ§è¯»å–  | TCP æ•°æ®å†…å®¹ã€HTTP è¯·æ±‚ä½“ã€WebSocket å¸§ |

- **äº‹ä»¶**ï¼šä»£è¡¨æŸä¸€ç¬é—´çš„ä¸ç¡®å®šè§¦å‘ï¼Œæ˜¯ä¿¡æ¯æµä¸­çš„â€œåˆ‡åˆ†ç‚¹â€ï¼›åªå¯å“åº”ï¼Œæ— æ³•é¢„æµ‹ã€‚
- **æµ**ï¼šä»£è¡¨å¯æ§çš„ã€æŒç»­çš„ä¿¡æ¯ä¼ è¾“ï¼Œå¯æŒ‰éœ€è¯»å–ï¼Œæ˜¯â€œè¿ç»­æ€§å­˜åœ¨â€çš„æœ¬ä½“ã€‚

> âœ¨ äº‹ä»¶æ˜¯ç‚¹ï¼Œæµæ˜¯çº¿ã€‚

---

## 3. äº‹ä»¶ä¸æµçš„ç›¸äº’å…³ç³»

äº‹ä»¶ä¸æµå¹¶éå¯¹ç«‹ï¼Œè€Œæ˜¯åŒä¸€ç°è±¡åœ¨ä¸åŒæŠ½è±¡å±‚æ¬¡çš„è¡¨è¾¾ï¼š

- **äº‹ä»¶æ˜¯æµçš„åˆ‡åˆ†ç‚¹**ï¼Œç”¨äºç•Œå®šé˜¶æ®µæ€§è¾¹ç•Œï¼›
- **æµæ˜¯äº‹ä»¶çš„å±•å¼€ä½“**ï¼Œä½“ç°æŒç»­ä¼ è¾“çš„è¿‡ç¨‹ï¼›
- ä¸¤è€…ä¹‹é—´å¯ç›¸äº’è½¬åŒ–ï¼Œä¾æ®ä¸Šä¸‹æ–‡è¯­ä¹‰è€Œå®šã€‚

åœ¨ SCX çš„è®¾è®¡ä¸­ï¼Œæ˜ç¡®åœ°åŒºåˆ†äº‹ä»¶ä¸æµï¼Œæœ‰åŠ©äºï¼š

- æ˜ç¡®è´£ä»»è¾¹ç•Œï¼›
- ä¿æŒæ¥å£çº¯æ´æ€§ï¼›
- å¼ºåŒ–å¼€å‘è€…å¯¹æ¨¡å‹çš„è®¤çŸ¥èƒ½åŠ›ã€‚

---

## 4. æ¶ˆè´¹æ–¹å¼çš„å·®å¼‚ï¼šPush vs Pull

| æœºåˆ¶     | è§¦å‘æ–¹å¼    | ç¼–ç¨‹æ¨¡å¼         |
|--------|---------|--------------|
| **äº‹ä»¶** | ç³»ç»Ÿä¸»åŠ¨æ¨é€  | å›è°ƒï¼ˆcallbackï¼‰ |
| **æµ**  | ä½¿ç”¨è€…ä¸»åŠ¨æ‹‰å– | è¯»å–ï¼ˆreadï¼‰æ¥å£   |

### ç¤ºä¾‹å¯¹ç…§

| åœºæ™¯               | ç±»å‹ | æ¥å£                      |
|------------------|----|-------------------------|
| æ–°çš„ TCP è¿æ¥å»ºç«‹      | äº‹ä»¶ | `onConnect(handler)`    |
| æ¥æ”¶ TCP æ•°æ®        | æµ  | `socket.read()`         |
| æ–°çš„ HTTP è¯·æ±‚åˆ°è¾¾     | äº‹ä»¶ | `onRequest(handler)`    |
| æ¥æ”¶ WebSocket æ•°æ®å¸§ | æµ  | `websocket.readFrame()` |

> âœ… æ— è®º TCPã€HTTP è¿˜æ˜¯ WebSocketï¼Œæœªæ¥æ‰€æœ‰åè®®éƒ½å°†éµå¾ªè¯¥ç»Ÿä¸€æŠ½è±¡ï¼Œç¡®ä¿å…¨æ¡†æ¶è®¾è®¡å…·å¤‡**ä¸€è‡´æ€§ä¸å¯ç»„åˆæ€§**ã€‚

---

## 5. é…ç½®ç±»å‹ï¼šé€šä¿¡ç³»ç»Ÿçš„è¯­ä¹‰æ„æˆå•ä½

åœ¨ SCX ä¸­ï¼Œ**é…ç½®æ˜¯ä¸€ç§å®è§‚çš„è¯­ä¹‰æ¦‚å¿µ**ï¼Œç”¨äºè¡¨è¾¾é€šä¿¡ç³»ç»Ÿä¸­å„ç±»å¯è®¾å®šè¡Œä¸ºã€‚æˆ‘ä»¬å°†å…¶åˆ’åˆ†ä¸ºä¸‰ç±»ï¼Œæ¯ç±»é…ç½®å¯¹åº”ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸä¸èŒè´£ã€‚

### ğŸ“š ä¸‰ç±»é…ç½®

| é…ç½®ç±»å‹       | å«ä¹‰ä¸èŒè´£            | ç”Ÿå‘½å‘¨æœŸ        | ç¤ºä¾‹                                |
|------------|------------------|-------------|-----------------------------------|
| **ä¸»ä½“é…ç½®**   | å®šä¹‰å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨æœ¬ä½“çš„é•¿æœŸç‰¹æ€§ | ä¸é€šä¿¡å¯¹è±¡ç”Ÿå‘½å‘¨æœŸä¸€è‡´ | `tls`ã€`backlog`                   |
| **è¿æ¥è¡Œä¸ºé…ç½®** | æ§åˆ¶è¿æ¥å»ºç«‹è¿‡ç¨‹çš„çŸ­æ—¶ç­–ç•¥    | ä»…åœ¨è¿æ¥é˜¶æ®µå­˜åœ¨    | `timeout`ã€`bindPort`ã€`remoteAddr` |
| **äº‹ä»¶æ³¨å†Œé…ç½®** | æè¿°è¿æ¥å»ºç«‹åå¯¹äº‹ä»¶çš„å“åº”ç­–ç•¥  | ä¸è¿æ¥ç”Ÿå‘½å‘¨æœŸä¸€è‡´   | `onConnect(handler)`ã€`onClose()`  |

### ğŸ§© ä¸ºä½•æ˜¾å¼åˆ†ç±»ï¼Ÿ

> è™½ç„¶**åœ¨å®ç°ä¸Šè¿™ä¸‰ç±»é…ç½®éƒ½å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°ã€ç±»æ–¹æ³•æˆ– setter è®¾ç½®**ï¼Œæˆ‘ä»¬ä»é€‰æ‹©è¿›è¡Œè¯­ä¹‰ä¸Šçš„æ˜¾å¼åˆ’åˆ†ï¼ŒåŸå› åœ¨äºï¼š

- **å‡¸æ˜¾å„é…ç½®ç±»å‹çš„èŒè´£è¾¹ç•Œä¸ç”Ÿå‘½å‘¨æœŸå·®å¼‚**ï¼›
- **æå‡ä½¿ç”¨è€…çš„ç†è§£èƒ½åŠ›ä¸ä½¿ç”¨æ„å›¾çš„è¡¨è¾¾æ¸…æ™°åº¦**ï¼›
- **éµå¾ªæ¥å£ä¸€è‡´æ€§ä¸çº¯ç²¹æ€§çš„è®¾è®¡åŸåˆ™**ã€‚

è¿™ä¸æ˜¯å®ç°ä¸Šçš„é™åˆ¶ï¼Œè€Œæ˜¯è®¾è®¡å±‚æ¬¡ä¸Šçš„å“²å­¦é€‰æ‹©ã€‚

---

### ğŸ“¦ å¯¹åº”çš„ä¼ é€’æ–¹å¼ï¼ˆè®¾è®¡çº¦å®šï¼‰

| é…ç½®ç±»å‹   | é»˜è®¤ä¼ é€’æ–¹å¼                     | è¯´æ˜                                        |
|--------|----------------------------|-------------------------------------------|
| ä¸»ä½“é…ç½®   | æ„é€ å‚æ•° / Setter              | ç”Ÿå‘½å‘¨æœŸé•¿ã€å¯åŠ¨æ€ä¿®æ”¹ï¼Œé€šå¸¸é€šè¿‡ `options()` è·å–å’Œè®¾ç½®        |
| è¿æ¥è¡Œä¸ºé…ç½® | `start()` / `connect()` å‚æ•° | ä»…åœ¨è¿æ¥å»ºç«‹é˜¶æ®µä¼ é€’ï¼Œéšåå³å¤±æ•ˆ                          |
| äº‹ä»¶æ³¨å†Œé…ç½® | ç‹¬ç«‹æ–¹æ³•æ³¨å†Œ                     | è™½ä¸ºâ€œé…ç½®â€ï¼Œä½†ä¸ºäº†çªå‡ºå…¶è¯­ä¹‰ï¼Œé‡‡ç”¨æ˜¾å¼æ³¨å†Œå½¢å¼ï¼ˆå¦‚ `onConnect()`ï¼‰ |

---

## âœ… ä½¿ç”¨ç¤ºä¾‹

```java
public static void serverDemo() {

    // é€šä¿¡ä¸»ä½“æŒæœ‰é…ç½®
    var server = new TCPServer(new TCPServerOptions().tls(TLS.ofDefault()));

    // å¯éšæ—¶åŠ¨æ€ä¿®æ”¹é…ç½®
    server.options().tls(TLS.ofTrustAny());

    // äº‹ä»¶æ³¨å†Œé…ç½®
    server.onConnect(connect -> {
        System.out.println(connect.remoteAddress());
    });

    // è¿æ¥è¡Œä¸ºé…ç½®
    server.start(8899);
}

public static void clientDemo() {

    // é€šä¿¡ä¸»ä½“æŒæœ‰é…ç½®
    var client = new TCPClient(new TCPClientOptions().tls(TLS.ofDefault()));

    // å¯éšæ—¶åŠ¨æ€ä¿®æ”¹é…ç½®
    client.options().tls(TLS.ofTrustAny());

    // client ä¸æ”¯æŒäº‹ä»¶æ³¨å†Œ

    // è¿æ¥è¡Œä¸ºé…ç½®
    client.connect(new InetSocketAddress("127.0.0.1", 8899), 5000);
}
```
