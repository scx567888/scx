# SCX TCP è®¾è®¡æ€è·¯

## 1. ç»Ÿä¸€æ€§ï¼šè¿ç»­æ€§çš„å­˜åœ¨

### ğŸŒŸ ä¸€åˆ‡é€šä¿¡çš†æºäºã€Œè¿ç»­æ€§çš„å­˜åœ¨ã€

ä»æœ¬è´¨çš„è§’åº¦å‡ºå‘ï¼Œé€šä¿¡ä¸–ç•Œä¸­çš„æ‰€æœ‰äº¤äº’ï¼Œéƒ½å¯ä»¥è§†ä¸ºä¸€ç§ **è¿ç»­æ€§çš„å­˜åœ¨** ã€‚æ— è®ºæ˜¯ TCP è¿æ¥ä¸æ•°æ®ä¼ è¾“ï¼ŒHTTP è¯·æ±‚ä¸å“åº”ï¼Œè¿˜æ˜¯
WebSocket æ¶ˆæ¯ï¼Œå®ƒä»¬æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€ç§ **æŒç»­æ€§çš„ä¿¡æ¯äº¤äº’è¿‡ç¨‹**ã€‚  
è¿™ä¸€è¿‡ç¨‹æ˜¯åŠ¨æ€çš„ã€è¿ç»­çš„ï¼Œä½†åœ¨ä¸åŒåœºæ™¯ä¸­å¯ä»¥é€šè¿‡ä¸åŒçš„æŠ½è±¡å±‚æ¬¡æ¥è¿›è¡Œåˆ†æä¸å»ºæ¨¡ã€‚

---

## 2. æŠ½è±¡è§†è§’ï¼šäº‹ä»¶ä¸æµ

æˆ‘ä»¬é€‰æ‹©ä»ä¸åŒçš„è§’åº¦å»çœ‹å¾…è¿™ç§è¿ç»­çš„å­˜åœ¨ï¼Œå¹¶å°†å…¶æŠ½è±¡ä¸º **äº‹ä»¶** å’Œ **æµ** ï¼Œè¿™ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µä»£è¡¨äº†ä¸åŒçš„è®¾è®¡æŠ½è±¡ï¼š

- **äº‹ä»¶** ï¼šä»£è¡¨ä¸ç¡®å®šçš„ã€ç¬æ—¶çš„è§¦å‘ç‚¹ã€‚äº‹ä»¶å‘ç”Ÿçš„æ—¶åˆ»æ˜¯éšæœºçš„ã€ä¸å¯é¢„æµ‹çš„ï¼Œæˆ‘ä»¬åªèƒ½åœ¨äº‹ä»¶å‘ç”Ÿåè¿›è¡Œå“åº”ã€‚äº‹ä»¶æœ¬è´¨ä¸Šæ˜¯â€œä¿¡æ¯æµçš„åˆ‡åˆ†ç‚¹â€ã€‚
- **æµ** ï¼šä»£è¡¨æŒç»­çš„ã€å¯æ§çš„ä¼ è¾“è¿‡ç¨‹ã€‚æµæ˜¯ä¸€ä¸ªè¿ç»­çš„è¡Œä¸ºï¼Œè¡¨ç¤ºä¿¡æ¯æˆ–æ•°æ®çš„é•¿æœŸã€è¿ç»­çš„äº¤äº’ã€‚æµå¯ä»¥ä¸»åŠ¨æ§åˆ¶ï¼Œéšæ—¶è¯»å–æˆ–å†™å…¥æ•°æ®ã€‚

| ç±»å‹            | å®šä¹‰         | ç‰¹å¾        | ç¤ºä¾‹                            |
|---------------|------------|-----------|-------------------------------|
| **äº‹ä»¶ï¼ˆEventï¼‰** | ç¬æ—¶å‘ç”Ÿçš„ç¦»æ•£åŠ¨ä½œ  | ä¸å¯é¢„æµ‹ã€ä¸å¯æŒç»­ | TCP è¿æ¥å»ºç«‹ã€HTTP è¯·æ±‚åˆ°è¾¾            |
| **æµï¼ˆStreamï¼‰** | å¯æŒç»­æ¶ˆè´¹çš„æ•°æ®åºåˆ— | æœ‰èµ·ç‚¹ã€å¯æ§è¯»å–  | TCP æ•°æ®å†…å®¹ã€HTTP è¯·æ±‚ä½“ã€WebSocket å¸§ |

> âœ¨ äº‹ä»¶æ˜¯ç‚¹ï¼Œæµæ˜¯çº¿ã€‚

---

## 3. äº‹ä»¶ä¸æµçš„ç›¸äº’å…³ç³»

äº‹ä»¶ä¸æµå¹¶éå¯¹ç«‹ï¼Œè€Œæ˜¯åŒä¸€äº‹ç‰©åœ¨ä¸åŒæŠ½è±¡å±‚æ¬¡çš„è¡¨è¾¾ï¼š

é€šè¿‡åŒºåˆ†è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œå°†å®ƒä»¬åº”ç”¨åˆ°ç½‘ç»œåè®®çš„å¤„ç†æµç¨‹ä¸­ï¼Œåˆ†åˆ«å¤„ç†é‚£äº›ä¸ç¡®å®šã€ç¬æ—¶çš„è¡Œä¸ºï¼ˆäº‹ä»¶ï¼‰å’ŒæŒç»­çš„æ•°æ®æµåŠ¨ï¼ˆæµ)

---

## 4. æ¶ˆè´¹æ–¹å¼çš„å·®å¼‚ï¼šPush vs Pull

| æœºåˆ¶     | è§¦å‘æ–¹å¼    | ç¼–ç¨‹æ¨¡å¼         |
|--------|---------|--------------|
| **äº‹ä»¶** | ç³»ç»Ÿä¸»åŠ¨æ¨é€  | å›è°ƒï¼ˆcallbackï¼‰ |
| **æµ**  | ä½¿ç”¨è€…ä¸»åŠ¨æ‹‰å– | è¯»å–ï¼ˆreadï¼‰æ¥å£   |

### ç¤ºä¾‹å¯¹ç…§

| åœºæ™¯               | ç±»å‹ | æ¥å£                      |
|------------------|----|-------------------------|
| æ–°çš„ TCP è¿æ¥å»ºç«‹      | äº‹ä»¶ | `onConnect(handler)`    |
| æ¥æ”¶ TCP æ•°æ®        | æµ  | `socket.read()`         |
| æ–°çš„ HTTP è¯·æ±‚åˆ°è¾¾     | äº‹ä»¶ | `onRequest(handler)`    |
| æ¥æ”¶ WebSocket æ•°æ®å¸§ | æµ  | `websocket.readFrame()` |

> âœ… æ— è®ºæ˜¯ TCPã€HTTP è¿˜æ˜¯ WebSocketï¼Œæœªæ¥æ‰€æœ‰åè®®éƒ½å°†éµå¾ªè¯¥ç»Ÿä¸€æŠ½è±¡ï¼Œç¡®ä¿å…¨æ¡†æ¶è®¾è®¡å…·å¤‡**ä¸€è‡´æ€§ä¸å¯ç»„åˆæ€§**ã€‚

---

## 5. é…ç½®ç±»å‹ï¼šé€šä¿¡ç³»ç»Ÿçš„è¯­ä¹‰æ„æˆå•ä½

åœ¨è®¾è®¡ä¸­ï¼Œ**é…ç½®æ˜¯ä¸€ç§å®è§‚çš„è¯­ä¹‰æ¦‚å¿µ**ï¼Œç”¨äºè¡¨è¾¾é€šä¿¡ç³»ç»Ÿä¸­å„ç±»å¯è®¾å®šè¡Œä¸ºã€‚æˆ‘ä»¬å°†å…¶åˆ’åˆ†ä¸ºä¸‰ç±»ï¼Œæ¯ç±»é…ç½®å¯¹åº”ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸä¸èŒè´£ã€‚

### ğŸ“š ä¸‰ç±»é…ç½®

| é…ç½®ç±»å‹       | å«ä¹‰ä¸èŒè´£            | ç”Ÿå‘½å‘¨æœŸ        | ç¤ºä¾‹                                |
|------------|------------------|-------------|-----------------------------------|
| **ä¸»ä½“é…ç½®**   | å®šä¹‰å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨æœ¬ä½“çš„é•¿æœŸç‰¹æ€§ | ä¸é€šä¿¡å¯¹è±¡ç”Ÿå‘½å‘¨æœŸä¸€è‡´ | `tls`ã€`backlog`                   |
| **è¿æ¥è¡Œä¸ºé…ç½®** | æ§åˆ¶è¿æ¥å»ºç«‹è¿‡ç¨‹çš„çŸ­æ—¶ç­–ç•¥    | ä»…åœ¨è¿æ¥é˜¶æ®µå­˜åœ¨    | `timeout`ã€`bindPort`ã€`remoteAddr` |
| **äº‹ä»¶æ³¨å†Œé…ç½®** | æè¿°è¿æ¥å»ºç«‹åå¯¹äº‹ä»¶çš„å“åº”ç­–ç•¥  | ä¸è¿æ¥ç”Ÿå‘½å‘¨æœŸä¸€è‡´   | `onConnect(handler)`ã€`onClose()`  |

### ğŸ§© ä¸ºä½•æ˜¾å¼åˆ†ç±»ï¼Ÿ

> å°½ç®¡**è¿™ä¸‰ç±»é…ç½®å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°ã€ç±»æ–¹æ³•æˆ– setter è®¾ç½®**ï¼Œæˆ‘ä»¬ä¾ç„¶é€‰æ‹©åœ¨è¯­ä¹‰ä¸Šè¿›è¡Œæ˜¾å¼åˆ’åˆ†ï¼ŒåŸå› åœ¨äºï¼š

- **çªå‡ºå„é…ç½®ç±»å‹çš„èŒè´£è¾¹ç•Œä¸ç”Ÿå‘½å‘¨æœŸå·®å¼‚**ï¼›
- **æå‡ä½¿ç”¨è€…çš„ç†è§£èƒ½åŠ›ä¸ä½¿ç”¨æ„å›¾çš„æ¸…æ™°è¡¨è¾¾**ï¼›
- **éµå¾ªæ¥å£ä¸€è‡´æ€§ä¸çº¯ç²¹æ€§è®¾è®¡åŸåˆ™**ã€‚

è¿™ä¸æ˜¯å®ç°ä¸Šçš„é™åˆ¶ï¼Œè€Œæ˜¯è®¾è®¡å±‚æ¬¡ä¸Šçš„é€‰æ‹©ã€‚

---

### ğŸ“¦ å¯¹åº”çš„ä¼ é€’æ–¹å¼ï¼ˆè®¾è®¡çº¦å®šï¼‰

| é…ç½®ç±»å‹   | é»˜è®¤ä¼ é€’æ–¹å¼                     | è¯´æ˜                                        |
|--------|----------------------------|-------------------------------------------|
| ä¸»ä½“é…ç½®   | æ„é€ å‚æ•° / Setter              | ç”Ÿå‘½å‘¨æœŸé•¿ã€å¯åŠ¨æ€ä¿®æ”¹ï¼Œé€šå¸¸é€šè¿‡ `options()` è·å–å’Œè®¾ç½®        |
| è¿æ¥è¡Œä¸ºé…ç½® | `start()` / `connect()` å‚æ•° | ä»…åœ¨è¿æ¥å»ºç«‹é˜¶æ®µä¼ é€’ï¼Œéšåå³å¤±æ•ˆ                          |
| äº‹ä»¶æ³¨å†Œé…ç½® | ç‹¬ç«‹æ–¹æ³•æ³¨å†Œ                     | è™½ä¸ºâ€œé…ç½®â€ï¼Œä½†ä¸ºäº†çªå‡ºå…¶è¯­ä¹‰ï¼Œé‡‡ç”¨æ˜¾å¼æ³¨å†Œå½¢å¼ï¼ˆå¦‚ `onConnect()`ï¼‰ |

---

## âœ… ä½¿ç”¨ç¤ºä¾‹

```java
public static void serverDemo() {

    // é€šä¿¡ä¸»ä½“æŒæœ‰é…ç½®
    var server = new TCPServer(new TCPServerOptions().tls(TLS.ofDefault()));

    // å¯éšæ—¶åŠ¨æ€ä¿®æ”¹é…ç½®
    server.options().tls(TLS.ofTrustAny());

    // äº‹ä»¶æ³¨å†Œé…ç½®
    server.onConnect(connect -> {
        System.out.println(connect.remoteAddress());
    });

    // è¿æ¥è¡Œä¸ºé…ç½®
    server.start(8899);
}

public static void clientDemo() {

    // é€šä¿¡ä¸»ä½“æŒæœ‰é…ç½®
    var client = new TCPClient(new TCPClientOptions().tls(TLS.ofDefault()));

    // å¯éšæ—¶åŠ¨æ€ä¿®æ”¹é…ç½®
    client.options().tls(TLS.ofTrustAny());

    // client ä¸æ”¯æŒäº‹ä»¶æ³¨å†Œ

    // è¿æ¥è¡Œä¸ºé…ç½®
    client.connect(new InetSocketAddress("127.0.0.1", 8899), 5000);
}
```
